CC=@CC@
INCLUDE=-I../include @INCLUDE@
BIN=../bin
CFLAGS=@CFLAGS@ -O2 -fomit-frame-pointer -Wall
DEFINES=@DEFS@ -D_SERVER_VERSION="\"@VERSION@\""
LIBS=@LIBS@
LIBDIR=@LIBDIR@

OBJS= clientinfo.o server.o client.o gethandler.o socket.o memory.o outstream.o weblog.o utils.o fnmatch.o outgif.o error.o

all: $(OBJS)
	$(CC) $(OBJS) $(LIBS) $(LIBDIR) -shared -o libwebserver.so
	ar -r libwebserver.a *.o
	ranlib libwebserver.a   
	mkdir -p $(BIN);
	cp libwebserver.a libwebserver.so $(BIN)



.c.o:
	$(CC) -c $< $(CFLAGS) $(DEFINES) $(INCLUDE)





clean:
	@echo "Cleaning...";	
	@rm -f *.o 
	@rm -f libwebserver.so
	@rm -f libwebserver.a
	@rm -rf $(BIN)

distclean: clean
	@rm -f Makefile
	
	
		 
		 
