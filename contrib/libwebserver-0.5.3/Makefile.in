#
# by Luis Figueiredo (stdio@netc.pt)
#
#
#
PACKAGE=libwebserver-@RELEASE@
prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=@bindir@
libdir=@libdir@
includedir=@includedir@

all: 
	cd src; make	
	cd help; make
	cd examples; make -i



clean:
	cd src; make clean
	cd examples; make clean
	cd help; make clean


distclean: 
	@rm -f config.cache
	@rm -f config.log
	@rm -f config.status
	@rm -rf autom4te.cache
	@rm -f configure.scan
	@rm -f libwebserver-config
	@echo -e "\nall:\n\t./configure\n\tmake\n" >Makefile
	cd src; make distclean
	cd examples; make distclean
	cd help; make distclean
	cd examples/SoundRecorder; make clean


dist: distclean
	@echo -e "\n\tCreateing Package tar.gz \33[01;37m../$(PACKAGE).tar.gz\33[0m\n";
	cd ..; tar -c $(PACKAGE) |gzip >$(PACKAGE).tar.gz


install: all
	if [ ! -d ${bindir} ]; then mkdir -p ${bindir}; fi
	if [ ! -d ${libdir} ]; then mkdir -p ${libdir}; fi
	if [ ! -d ${includedir} ]; then mkdir -p ${includedir}; fi
	install -b -m 755 bin/libwebserver.so ${libdir}/libwebserver.so.@RELEASE@
	rm -f ${libdir}/libwebserver.so
	ln -s ${libdir}/libwebserver.so.@RELEASE@ ${libdir}/libwebserver.so
	install -b -m 644 bin/libwebserver.a ${libdir}/libwebserver.a
	install -b -m 644 include/web_server.h ${includedir}/web_server.h
	install -b -m 755 libwebserver-config ${bindir}/libwebserver-config

